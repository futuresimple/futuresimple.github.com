<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Building a blog using nanoc | Future Simple Lab</title>
<link href='/css/bootstrap.css' media='screen' rel='stylesheet' type='text/css' />
<link href='/css/bootstrap-responsive.css' media='screen' rel='stylesheet' type='text/css' />
<link href='/css/style.css' media='screen' rel='stylesheet' type='text/css' />
<link href='/css/post.css' media='screen' rel='stylesheet' type='text/css' />
<link href='/css/coderay.css' media='screen' rel='stylesheet' type='text/css' />
<script src='/js/jquery.js' type='text/javascript'></script>
<script src='/js/welcome_code.js' type='text/javascript'></script>
<meta content='width=device-width, initial-scale=1.0' name='viewport' />
<link href='/index.xml' rel='alternate' title='Future Simple Lab' type='application/atom+xml' />

</meta>
</head>
<body>
<script type='text/javascript'>
  //<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29668048-1']);
    _gaq.push(['_trackPageview']);
    
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  //]]>
</script>

<div class='container bottom-space'>
<div id='header'>
<a href='/'>
<img alt='FS Logo' class='logo' src='/images/logo-fs.png' />
</a>
<ul class='nav nav-pills pull-right'>
<li>
<a href='/rss.xml'>Subscribe</a>
</li>
<li>
<a href='http://hackkrk.com/' target='_blank'>HackKRK</a>
</li>
<li>
<a href='http://www.futuresimple.com/company/careers/' target='_blank'>Jobs</a>
</li>
</ul>
<div class='clear'></div>
</div>

<div class='clear'></div>
<div class='row'>
<div class='span8'>
<h2 class='post-title'>Building a blog using nanoc</h2>
<div class='post-meta'>
<div class='author'>Michał Bugno @ 2012-02-24</div>
<div class='facebook-share'>
<a name='fb_share'></a>
<script src='http://static.ak.fbcdn.net/connect.php/js/FB.Share' type='text/javascript'></script>
</div>
<div class='twitter-button'>
<a class='twitter-share-button' data-text='Building a blog using nanoc' data-url='http://futuresimple.github.com/posts/2012-02-24-building-a-blog-using-nanoc/' data-via='futuresimplelab' href='https://twitter.com/share'>Tweet</a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
</div>
<div class='clear'></div>
<article>
<p>Remember the classic “build a blog in 10 minutes” Rails tutorial? Back then, it blew our minds. Nowadays parts of
<em>the Web</em> are moving towards static content. Plain old <abbr title="Hyper-Text Markup Language">HTML</abbr> with
<abbr title="Cascading Style Sheets">CSS</abbr> suit the needs of many, many people. Being bulletproof, easy and almost free,
this combination has many advantages over complicated, backend-driven sites.</p>

<p>This blog is an example of such a static site, take a look how it was created. You can certainly set it up in 10 minutes
(the design doesn’t count, right?).</p>



<p>We came up with the idea of a blog couple of days ago. As programmers we were excited to code it ourselves, that’s why we
didn’t use an online blogging engine like <a href="http://www.tumblr.com/">tumblr</a> or <a href="http://wordpress.com">wordpress.com</a>.
Instead we wanted to make it a static site with a JavaScript commenting system. We were browsing through Ruby–powered
generators as it is our favourite language. There were plenty of possibilities on
<a href="https://www.ruby-toolbox.com/categories/static_website_generation">ruby-toolbox.com</a>:</p>

<ol>
<li>We already had some experience with <a href="http://jekyllrb.com/">Jekyll</a>, but it is too simple in our opinion. It suits GitHub
pages well, but we wanted to have something more powerful.</li>
  <li>I tried <a href="http://middlemanapp.com/">Middleman</a> once, but it failed somewhere between encoding and
template–loading.</li>
  <li>
<a href="https://twitter.com/marcinbunsch">@marcinbunsch</a> had some experience with <a href="http://stasis.me/">Stasis</a>.</li>
  <li>I was working with <a href="http://nanoc.stoneship.org/">nanoc</a>
</li>
</ol><p>We gave nanoc a try. It was my call, I did a lot of stuff with it and felt it is quite flexible which was one of our
requirements.</p>

<p>From now on, there are some default steps every Ruby developer does when starting a new project: first <code>git init</code> the
repository, then do some <code>bundle</code>ing and finally don’t forget to <code>rvm</code> all this. The latest Ruby <code>1.9.3-p125</code> was already
out when we started this so why not use it?</p>

<p><a href="http://twitter.github.com/bootstrap/">Bootstrap project</a> lays out the blog for us. It’s amazing how these guys got it
all figured out. Just link the stylesheets in your site, assign a class to a list and boom - a fancy menu appears. Also
the naming convention forces you to stick to it, you don’t have to come up with class names, just override the existing
ones and you’re good to go.</p>

<p>Creating a blog itself was quite easy. Nanoc tries to keep it in two simple steps: first compile, then route. It means
that first it takes all the files, finds a compilation rule which matches every file and processes it. Then the file is
routed, which basically means it is assigned a path. Everything is configured within <code>Rules</code> file. This is how a simple
<code>Rules</code> file might look:</p>

<pre><code class="language-ruby">compile <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="keyword">if</span> item.binary?
    <span class="comment"># don’t filter binary items</span>
  <span class="keyword">else</span>
    filter <span class="symbol">:haml</span>
    layout <span class="string"><span class="delimiter">'</span><span class="content">default.html</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

route <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
  <span class="keyword">if</span> item.binary?
    <span class="comment"># Write item with identifier /foo/ to /foo.ext</span>
    item.identifier.chop + <span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span> + item[<span class="symbol">:extension</span>]
  <span class="keyword">else</span>
    <span class="comment"># write item with identifier /site/ to /site/index.html</span>
    item.identifier + <span class="string"><span class="delimiter">'</span><span class="content">index.html</span><span class="delimiter">'</span></span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre>

<p>We fought a little bit with files with the same name but different extensions. We like naming files with their original
extensions and then adding the extensions of preprocessor which is used to generate them, for example <code>index.html.haml</code>.
Nanoc treats skips all extensions by default, which generates errors for <code>index.html.haml</code> and <code>index.xml.haml</code>. We had
to tweak <code>config.yml</code> to skip only last extension: <code>allow_periods_in_identifiers: true</code>.</p>

<p>Paginating articles is described in <a href="http://nanoc.stoneship.org/docs/6-guides/#paginating-articles">one of the official guides</a>.</p>

<p>One disadvantage of static sites is that… they’re static, so you cannot have comments on your blog. Or can you?
<a href="http://disqus.com/">Disqus</a> provides a neat solution to this problem allowing you to have comments by using JavaScript.
They are actually a production-ready solution, already providing the functionality to multiple sites. Setting up a blog
requires two things: posting comments and displaying number of comments on index page under each entry. Simple JavaScript
code and HTML tweaking:</p>

<pre><code class="language-html"><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">/your/article#disqus_thread</span><span class="delimiter">"</span></span>
   <span class="attribute-name">data-disqus-identifier</span>=<span class="string"><span class="delimiter">"</span><span class="content">unique-disqus-identifier</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>Comments<span class="tag">&lt;/a&gt;</span></code></pre>

<p>Important stuff: the <code>#disqus_thread</code> anchor at the end of <code>href</code> and <code>data-disqus-identifier</code> which you should provide
to uniquely identify your articles across the whole blog.</p>

<p>You can see all the work <a href="https://github.com/futuresimple/futuresimple.github.com">on our github page</a>. It’s amazing how
easy it is to create such a blog. Everything you need is free out there, waiting for you to use it. Thank you, Open Source!</p>
</article>
<div id='disqus_thread'></div>
<script type='text/javascript'>
var disqus_shortname = 'futuresimplelab'; // required: replace example with your forum shortname
var disqus_identifier = 'building-a-blog-using-nanoc';
var disqus_url = 'http://futuresimple.github.com/posts/2012-02-24-building-a-blog-using-nanoc/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>
Please enable JavaScript to view the
<a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a>
</noscript>
<a class='dsq-brlink' href='http://disqus.com'>
blog comments powered by
<span class='logo-disqus'>Disqus</span>
</a>

</div>
<div class='span4'>
<script charset='utf-8' src='http://widgets.twimg.com/j/2/widget.js'></script>
<script type='text/javascript'>
  //<![CDATA[
    new TWTR.Widget({
      version: 2,
      type: 'profile',
      rpp: 6,
      interval: 30000,
      width: 'auto',
      height: 300,
      theme: {
        shell: {
          background: '#ffffff',
          color: '#666666'
        },
        tweets: {
          background: '#ffffff',
          color: '#666666',
          links: '#2A95B3'
        }
      },
      features: {
        scrollbar: false,
        loop: false,
        live: false,
        behavior: 'all'
      }
    }).render().setUser('futuresimplelab').start();
  //]]>
</script>

<div class='github'>
<div class='repos'>
<div class='logo'>
<img alt='Github' src='/images/github_logo.png' />
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
158
<img src='/images/icons/fork_11x12.png' />
6
</div>
<div class='name'>
<a href='https://github.com/futuresimple/broadcast'>
broadcast
</a>
</div>
<div class='language'>
Ruby
</div>
<div class='description'>
A broadcasting microframework making publishing of messages to different services easy.
</div>
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
128
<img src='/images/icons/fork_11x12.png' />
10
</div>
<div class='name'>
<a href='https://github.com/futuresimple/dropbox-api'>
dropbox-api
</a>
</div>
<div class='language'>
Ruby
</div>
<div class='description'>
Dropbox API Ruby Client
</div>
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
91
<img src='/images/icons/fork_11x12.png' />
14
</div>
<div class='name'>
<a href='https://github.com/futuresimple/jessie'>
jessie
</a>
</div>
<div class='language'>
JavaScript
</div>
<div class='description'>
Node runner for Jasmine JavaScript BDD testing framework
</div>
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
4
<img src='/images/icons/fork_11x12.png' />
1
</div>
<div class='name'>
<a href='https://github.com/futuresimple/futuresimple.github.com'>
futuresimple.github.com
</a>
</div>
<div class='language'>
Ruby
</div>
<div class='description'>
Future Simple's github homepage
</div>
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
2
<img src='/images/icons/fork_11x12.png' />
1
</div>
<div class='name'>
<a href='https://github.com/futuresimple/api_client'>
api_client
</a>
</div>
<div class='language'>
Ruby
</div>
<div class='description'>
HTTP API Client Builder
</div>
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
2
<img src='/images/icons/fork_11x12.png' />
0
</div>
<div class='name'>
<a href='https://github.com/futuresimple/obedience-core'>
obedience-core
</a>
</div>
<div class='language'>
JavaScript
</div>
<div class='description'>
Obedience Core
</div>
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
1
<img src='/images/icons/fork_11x12.png' />
1
</div>
<div class='name'>
<a href='https://github.com/futuresimple/restart_butler'>
restart_butler
</a>
</div>
<div class='language'>
Ruby
</div>
<div class='description'>

</div>
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
1
<img src='/images/icons/fork_11x12.png' />
1
</div>
<div class='name'>
<a href='https://github.com/futuresimple/presentations'>
presentations
</a>
</div>
<div class='language'>

</div>
<div class='description'>
All kinds of presentations delivered by FS team members
</div>
</div>
<div class='repo'>
<div class='stats'>
<img src='/images/icons/eye_12x9.png' />
1
<img src='/images/icons/fork_11x12.png' />
1
</div>
<div class='name'>
<a href='https://github.com/futuresimple/blog-lab'>
blog-lab
</a>
</div>
<div class='language'>
Ruby
</div>
<div class='description'>

</div>
</div>
</div>
</div>

</div>
</div>
</div>
</body>
</html>
